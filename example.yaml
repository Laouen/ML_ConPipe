general:
  module_paths: ['../test_data']
  verbose: 1

data_preprocess:
  output_storage_type: csv # csv, json, pickle o dict {param_name: output_storage_type}
  function: PhD_entelai_predoc.preprocess_data.preprocess_data
  parameters:
    data_directory: /git/doctorado/PhD_entelai/data

feature_extraction:
  input_from: ['data_preprocess']
  output_storage_type: csv
  function: PhD_entelai_predoc.feature_extraction.feature_extraction
  parameters:
    columns_to_include: []
    columns_to_drop: []
    target_col: ''

data_split:
  input_from: ['feature_extraction']
  output_storage_type: csv
  class: ConPipe.DataSplit.DataSplit
  parameters:
    function: sklearn.model_selection.train_test_split
    parameters:
      test_size: None
      random_state: 42
      shuffle: On

model_selection:
  input_from: ['data_split']
  output_storage_type: 
    estimator: pickle 
    metrics_results: csv
  class: ConPipe.ModelSelection.ModelSelection
  parameters:
    parameter_optimizer: 
      class: sklearn.model_selection.GridSearchCV
      scoring: accuracy # esto tiene que poder ser una funcion custom desde el módulo también
      parameters: 
        refit: On
    cv: 
      class: sklearn.model_selection.StratifiedKFold 
      parameters:
        n_splits: 5
        shuffle: On
        random_state: 42
    models: 
      LogisticRegression:
        class: sklearn.linear_model.LogisticRegression
        constructor_params:
          random_state: 42
        param_grid:
          penalty: ['l1', 'l2']
          C: [0, 0.2, 0.4, 0.6, 0.8, 1.0]
          solver: ['lbfgs', 'saga', 'liblinear']
        fit_params:
          sample_weight: None
      RandomForestClassifier:
        class: sklearn.ensemble.RandomForestClassifier
        constructor_params:
          random_state: 42
        param_grid:
          n_estimators: [10, 100, 1000]
          criterion: ['gini', 'entropy']
          max_depth: [2,6,10]
        fit_params:
          sample_weight: None

model_evaluation:
  input_from: ['data_split','model_selection']
  class: ConPipe.ModelEvaluation.ModelEvaluation
  parameters:
    fit_model: Off
    tag: test
    output_path: /path/output
    class_labels: 
      0: Negative
      1: Positive
    scores: 
      accuracy:
        function: sklearn.metrics.accuracy_score
        score_type: pred
      recall:
        function: sklearn.metrics.recall_score
        score_type: pred
      auc:
        function: sklearn.metrics.roc_auc_score
        score_type: proba
    charts:
      roc:
        function: ConPipe.visualizations.roc_chart
      confusion_matrix: 
        function: ConPipe.visualizations.vonfusion_matrix_chart
        parameters:
          annot: On
          cmap: flare
          fmt: g
